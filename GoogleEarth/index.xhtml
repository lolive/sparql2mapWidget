<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--classGraphUri="insert classGraphURI here (optional)"-->

<head>
<meta http-equiv="Content-Type" content="text/xml; charset=ISO-8859-1"/>
<style> 
<!--
          * {padding:100px;margin:100px;color:#f3a1ff;} 
          body {background-color:#ffffff;} 
-->
     </style> 

<script src="http://code.jquery.com/jquery-1.10.2.min.js">
<!----></script><script src="http://datao.zerezo.com/datao/underscore.js">
<!----></script><script src="../js/distal.js">
<!----></script><script src="http://datao.zerezo.com/datao/n3.js">
<!----></script><script src="http://datao.zerezo.com/datao/myn3.js">
<!----></script><script><![CDATA[
var vars = {};
var params = window.location.href;
var parts = params.replace(/[?&]+([^=&#]+)=([^&#]*)/gi, function(m,key,value) {
if(vars[key]){
if(vars[key] instanceof Array){
vars[key].push(value);
}else{
vars[key] = [vars[key], value];
}
}else{
vars[key] = value;
}
});
var latitude=vars['lat'];//"48.5112";
var longitude=vars['long'];//"2.2055";
var name=decodeURIComponent(vars['name']);
]]></script><script><![CDATA[
var myquery='CONSTRUCT { ?PathRow0 <http://toto/#bottomBoundary> ?BottomBoundary .  ?PathRow0 <http://toto/#topBoundary> ?TopBoundary .  ?PathRow0 <http://toto/#leftBoundary> ?LeftBoundary .  ?satelliteImage1 <http://toto/#when> ?when10 . ?satelliteImage1 <http://toto/#pathRow> ?PathRow0 .  ?PathRow0 <http://toto/#rightBoundary> ?RightBoundary .  ?satelliteImage1 <http://toto/#sensor> ?Sensor6 .  ?satelliteImage1 <http://toto/#fileid> ?Fileid7 .  ?PathRow0 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://toto/#PathRow> .  ?satelliteImage1 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://toto/#satelliteImage> .  } WHERE { ?PathRow0 <http://toto/#bottomBoundary> ?BottomBoundary2 .  ?PathRow0 <http://toto/#topBoundary> ?TopBoundary3 .  ?PathRow0 <http://toto/#leftBoundary> ?LeftBoundary4 .  ?satelliteImage1 <http://toto/#when> ?when10 .  ?satelliteImage1 <http://toto/#pathRow> ?PathRow0 .  ?PathRow0 <http://toto/#rightBoundary> ?RightBoundary5 .  ?satelliteImage1 <http://toto/#sensor> ?Sensor6 .  ?satelliteImage1 <http://toto/#fileid> ?Fileid7 .  ?PathRow0 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://toto/#PathRow> .  ?satelliteImage1 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://toto/#satelliteImage> . FILTER (?Sensor6 = "l5") .  FILTER (?RightBoundary5 > '+longitude+') . FILTER (?LeftBoundary4 < '+longitude+') .   FILTER (?TopBoundary3 > '+latitude+') . FILTER (?BottomBoundary2 < '+latitude+' )  . BIND (str(?TopBoundary3) as ?TopBoundary)  . BIND (str(?BottomBoundary2) as ?BottomBoundary)  . BIND (str(?LeftBoundary4) as ?LeftBoundary)  . BIND (str(?RightBoundary5) as ?RightBoundary) }';
var myendpoint='http://penny.zerezo.com:9015/sparql/';
]]></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="sparql2kml2googleEarth.js"/>

</head>

<body>

<div style="display: none;">
<kml class="layer" xmlns="http://www.opengis.net/kml/2.2" data-qrepeat="satelliteImage http://toto/#satelliteImage" data-qattr="id satelliteImage|http://toto/#fileid ,#">

<Document data-qrepeat="pathRow satelliteImage|http://toto/#pathRow">

<Camera>    <longitude ddata-qtext="html pathRow|http://toto/#leftBoundary">113.395838</longitude>    <latitude ddata-qtext="html pathRow|http://toto/#topBoundary">22.113852</latitude>    <altitude>630000</altitude>    <heading>0.0</heading>    <tilt>0</tilt>  </Camera>

 
<GroundOverlay>
   
<Icon>
    
<href>http://earthexplorer.usgs.gov//browse/full/tm/<span data-qtext="replace satelliteImage|http://toto/#fileid">
TTerraColor_Hong_Kong_15m_1024_64_kmz_L4_3_1.jpg</span></href>
   
</Icon>
   
<LatLonBox>
    
<north data-qtext="html pathRow|http://toto/#topBoundary">
22.34222964226043500</north>
    
<south data-qtext="html pathRow|http://toto/#bottomBoundary">
22.20009844226043700</south>
    
<east data-qtext="html pathRow|http://toto/#rightBoundary">
113.67256904815704000</east>
    
<west  data-qtext="html pathRow|http://toto/#leftBoundary">
113.53043784815704000</west>
   
</LatLonBox>
  
</GroundOverlay>
<Placemark>
    <name>Simple placemark</name>
    <Point>
      <coordinates>-122.0822035425683,37.42228990140251,0</coordinates>
    </Point>
  </Placemark>

 
</Document>
 

</kml>
</div>
<div id="map3d" style="float:left; height: 600px; width: 70%;"></div>
<div style="float:left; width: 25%; height: 600px; overflow: auto" >
<ul>
<li data-qrepeat="satelliteImage http://toto/#satelliteImage">
<table>
<tr>
<td colspan="2">
<a class="satelliteImage" href="#LXXXX" data-qattr="href satelliteImage|http://toto/#fileid ,#"><span data-qtext="satelliteImage|http://toto/#fileid">LXXXX</span></a>
</td>
</tr>
<tr>
<td>
Sensor: <span data-qtext="html satelliteImage|http://toto/#sensor">l0</span>
</td>
<td>
Date: <span data-qtext="html satelliteImage|http://toto/#when">01011900</span>
</td>
</tr>
</table>
</li>
</ul>
</div>
<!--div>
<p>GoogleEarth: SUCCESS!!!!</p>
</div-->
</body>

</html>

